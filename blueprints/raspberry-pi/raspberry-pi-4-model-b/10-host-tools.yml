#
# 10-host-tools.yml
# Installs host-side build tools: Go, libconfuse, and genimage.
#
- name: "Install Go"
  action: "unarchive_from_ref"
  ref: "sdk.golang.go@stable"
  dest: "/usr/local"
  creates: "/usr/local/go/bin/go"
  mode: "USER_RWX_GROUP_RX_OTHER_RX"

- name: "Add Go to system PATH"
  action: "write_env_file"
  file: "/etc/profile.d/10-golang.sh"
  content: |
    #!/bin/sh
    export PATH=$PATH:/usr/local/go/bin
    export GOPATH=$HOME/go
    export PATH=$PATH:$GOPATH/bin
  mode: "USER_RWX_GROUP_RX_OTHER_RX"

